FROM alpine:latest

#install python
RUN apk update && apk add \
    python \
    curl

#no need to add cleaning command as alpine cleans package automatically

#download kolibri
RUN curl -o kolibri -L https://github.com/learningequality/kolibri/releases/download/v0.10.3/kolibri-0.10.3.pex

#make executable
RUN chmod +x kolibri

#used for storing db and content (used when mounting volume)
RUN mkdir /root/.kolibri

EXPOSE 8080

CMD ./kolibri start && tail -f /root/.kolibri/server.log
